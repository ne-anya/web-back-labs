{% extends "base.html" %}

{% block lab %}Поиск товаров{% endblock %}

{% block main %}
<h1>Поиск смартфонов по цене</h1>

<form method="GET">
    <div style="margin: 20px 0;">
        <label>Минимальная цена:</label><br>
        <input type="number" name="min_price" value="{{ min_price }}" 
               placeholder="15990" style="width: 200px; padding: 8px;">
    </div>
    
    <div style="margin: 20px 0;">
        <label>Максимальная цена:</label><br>
        <input type="number" name="max_price" value="{{ max_price }}" 
               placeholder="99990" style="width: 200px; padding: 8px;">
    </div>
    
    <div style="margin: 20px 0;">
        <button type="submit" style="padding: 10px 20px; margin-right: 10px;">Искать</button>
        <button type="submit" name="reset" value="1" style="padding: 10px 20px;">Сброс</button>
    </div>
</form>

<div style="margin: 20px 0;">
    <strong>Найдено товаров: {{ count }}</strong>
</div>

{% if count == 0 %}
<div style="background: #ffebee; padding: 15px; border: 1px solid #f44336; margin: 20px 0;">
    Не найдено ни одного товара в заданном диапазоне цен
</div>
{% else %}
<table border="1" style="width: 100%; border-collapse: collapse;">
    <thead>
        <tr style="background: #f5f5f5;">
            <th style="padding: 10px;">Название</th>
            <th style="padding: 10px;">Цена</th>
            <th style="padding: 10px;">Бренд</th>
            <th style="padding: 10px;">Цвет</th>
            <th style="padding: 10px;">Память</th>
        </tr>
    </thead>
    <tbody>
        {% for product in products %}
        <tr>
            <td style="padding: 10px;">{{ product.name }}</td>
            <td style="padding: 10px;">{{ product.price }} руб.</td>
            <td style="padding: 10px;">{{ product.brand }}</td>
            <td style="padding: 10px;">{{ product.color }}</td>
            <td style="padding: 10px;">{{ product.storage }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

<div style="margin-top: 20px;">
    <a href="/lab3/">Вернуться в меню</a>
</div>
{% endblock %}